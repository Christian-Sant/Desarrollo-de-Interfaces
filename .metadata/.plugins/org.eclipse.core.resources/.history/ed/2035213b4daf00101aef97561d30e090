package primero;

import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.Scanner;

public class RegistroEstudiantes {
	static Scanner sc = new Scanner(System.in);
	static boolean nombreEstudianteConfirmacion = false;
	 public static void main(String[] args) {
	        String nombreArchivo = "C:\\Users\\Tarde\\Downloads\\Estudiantes.txt";

	        try (RandomAccessFile archivo = new RandomAccessFile(nombreArchivo, "rw")) {
	        	int opcion;
	        	do {
	        		System.out.println("--REGISTRO DEL ESTUDIANTE--");
	        		System.out.println("1. Escribir registro");
	        		System.out.println("2. Leer registro");
	        		System.out.println("0. Terminar");
	        		System.out.print("Opción: ");
	        		opcion = sc.nextInt();
	        		switch(opcion) {
	        		case 1 :
	        			idEstudiante(archivo);
	        			nombreEstudiante(archivo);
	        			nota(archivo);
	        			break;
	        		case 2 :
	        			System.out.print("Dime el ID del estudiante: ");
		        		int id = sc.nextInt();
	        			mostrarInformacion(archivo,id);
	        			break;
	        		case 0 :
	        			System.exit(0);
	        			break;
	        		default:
	        			System.out.println("Opción no valida.");
	        			System.out.println("");
	        		}
	        	}
	        	while(opcion != 0);
	        } 
	        catch (IOException e){
	            System.err.println("Error al acceder al archivo: " + e.getMessage());
	        }
	    }
	 
	 private static void mostrarInformacion(RandomAccessFile archivo, int idBuscar) throws IOException {
		    final int TAM_REGISTRO = 48;
		    long totalRegistros = archivo.length() / TAM_REGISTRO;

		    if (idBuscar < 1 || idBuscar > totalRegistros) {
		        System.out.println("Registro no encontrado.");
		        return;
		    }

		    long posicion = (idBuscar - 1) * TAM_REGISTRO;
		    archivo.seek(posicion);

		    int id = archivo.readInt();

		    // Leer nombre (20 caracteres)
		    char[] nombreChars = new char[20];
		    for (int i = 0; i < 20; i++) {
		        nombreChars[i] = archivo.readChar();
		    }
		    String nombre = new String(nombreChars).trim();

		    float nota = archivo.readFloat();

		    System.out.println("ID: " + id + ", Nombre: " + nombre + ", Nota: " + nota);
		}

	 
	 private static void idEstudiante(RandomAccessFile archivo) throws IOException {
		 System.out.print("Dime el ID del estudiante: ");
         int id = sc.nextInt();
         archivo.writeInt(id);
	 }
	 
	 private static void nombreEstudiante(RandomAccessFile archivo) throws IOException {
		 sc.nextLine();
		 System.out.print("Dime el nombre del estudiante: ");
         String nombreEstudiante = sc.nextLine();
         archivo.writeUTF(nombreEstudiante);
	 }
	 private static void nota(RandomAccessFile archivo) throws IOException {
		 System.out.print("Dime la nota del estudiante: ");
         float nota = sc.nextFloat();
         archivo.writeFloat(nota);
         System.out.print("\n");
	 }
}
