package primero;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class TaskCellRenderer extends JPanel implements ListCellRenderer<Tarea> {

    private static final long serialVersionUID = 1L;

    private JLabel lblNombre;
    private JLabel lblPrioridad;
    private JLabel lblIconoPrioridad;
    private JButton btnEstado;

    public TaskCellRenderer() {
        setLayout(new GridLayout(1, 4, 10, 0));

        lblNombre = new JLabel();
        lblPrioridad = new JLabel();
        lblIconoPrioridad = new JLabel();
        lblIconoPrioridad.setHorizontalAlignment(SwingConstants.CENTER);
        btnEstado = new JButton();
        
        lblNombre.setFont(new Font("Arial", Font.BOLD, 13));
        lblPrioridad.setFont(new Font("Arial", Font.PLAIN, 12));
        btnEstado.setFont(new Font("Arial", Font.ITALIC, 12));

        add(lblNombre);
        add(lblPrioridad);
        add(lblIconoPrioridad);
        add(btnEstado);
    }

    @Override
    public Component getListCellRendererComponent(
        JList<? extends Tarea> list, Tarea tarea, int index, boolean isSelected, boolean cellHasFocus) {
	        lblNombre.setText(tarea.getNombre());
	        lblPrioridad.setText("Prioridad: " + tarea.getPrioridad());
	        boolean estado = tarea.isEstado();
	        if(estado) {
	        	btnEstado.setText("Completada");
	        }
	        else {
	        	btnEstado.setText("Pendiente");
	        }
	        
	        switch (tarea.getPrioridad()) {
	            case "Alta":
	            	lblIconoPrioridad.setIcon(new ImageIcon("C:\\Users\\Tarde\\Downloads\\circuloRojo.png"));
	                break;
	            case "Media":
	            	lblIconoPrioridad.setIcon(new ImageIcon("C:\\Users\\Tarde\\Downloads\\circuloAmarrillo.png"));
	                break;
	            case "Baja":
	            	lblIconoPrioridad.setIcon(new ImageIcon("C:\\Users\\Tarde\\Downloads\\circuloVerde.png"));
	                break;
	        }
	        btnEstado.addActionListener(new ActionListener() {
	        	public void actionPerformed(ActionEvent e) {
	        		
	        		if(btnEstado.getText().equals("Pendiente")) {
	        			btnEstado.setText("Completada");
	        		}
	        		else if(btnEstado.getText().equals("Completada")) {
	        			btnEstado.setText("Pendiente");
	        		}
	        	}
	        });
	        return this;
    }
}
